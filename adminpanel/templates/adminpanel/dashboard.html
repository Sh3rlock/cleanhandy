{% extends 'adminpanel/base_admin_with_nav.html' %}
{% load static %}
{% block page_title %}Admin Dashboard{% endblock %}
{% block breadcrumb %}Admin Dashboard{% endblock %}
{% block admin_content %}
<style>
  .text-primary {
    color: #F15A29 !important;
  }
  
  .btn-outline-orange {
    color: #F15A29;
    border: 1px solid #F15A29;
    background-color: transparent;
    transition: all 0.2s ease;
  }
  
  .btn-outline-orange:hover {
    background-color: #F15A29;
    color: white;
  }
</style>
  <h2 class="mb-4"><i class="fa-solid fa-square-poll-vertical me-2 text-primary"></i> Admin Dashboard</h2>
  
  <!-- Quick Navigation -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card border-1 shadow-sm" style="border: 1px solid #F15A29; background-color: #fff;">
        <div class="card-body">
          <h5 class="card-title text-primary mb-3"><i class="fa-solid fa-compass me-2"></i>Quick Navigation</h5>
          <div class="row">
            <!--<div class="col-md-3 mb-2">
              <a href="{% url 'booking_list' %}" class="btn btn-outline-orange btn-sm w-100">
                <i class="fa-solid fa-calendar-days me-2"></i>Bookings
              </a>
            </div> -->
            <div class="col-md-3 mb-2">
              <a href="{% url 'home_cleaning_quote_list' %}" class="btn btn-outline-orange btn-sm w-100 p-2">
                <i class="fa-solid fa-house me-2"></i>Home Cleaning Quotes
              </a>
            </div>
            <div class="col-md-3 mb-2">
              <a href="{% url 'office_cleaning_quote_list' %}" class="btn btn-outline-orange btn-sm w-100 p-2">
                <i class="fa-solid fa-building me-2"></i>Office Cleaning Quotes
              </a>
            </div>
            <div class="col-md-3 mb-2">
              <a href="{% url 'handyman_quote_list' %}" class="btn btn-outline-orange btn-sm w-100 p-2">
                <i class="fa-solid fa-hammer me-2"></i>Handyman Quotes
              </a>
            </div>
            
            <div class="col-md-3 mb-2">
              <a href="{% url 'post_event_cleaning_quote_list' %}" class="btn btn-outline-orange btn-sm w-100 p-2">
                <i class="fa-solid fa-broom me-2"></i>Post Event Cleaning Quotes
              </a>
            </div>
          </div>
          <div class="row mt-2">
            
            <div class="col-md-3 mb-2">
              <a href="{% url 'customer_list' %}" class="btn btn-outline-orange btn-sm w-100">
                <i class="fa-solid fa-users me-2"></i>Customers
              </a>
            </div>
            <div class="col-md-3 mb-2">
              <a href="{% url 'subscriber_list' %}" class="btn btn-outline-orange btn-sm w-100">
                <i class="fa-solid fa-newspaper me-2"></i>Subscribers
              </a>
            </div>
            
            <div class="col-md-3 mb-2">
              <a href="{% url 'booking_calendar' %}" class="btn btn-outline-orange btn-sm w-100">
                <i class="fa-solid fa-calendar me-2"></i>Calendar
              </a>
            </div>
            <div class="col-md-3 mb-2">
              <a href="{% url 'giftcard_discount' %}" class="btn btn-outline-orange btn-sm w-100">
                <i class="fa-solid fa-credit-card me-2"></i>Gift Cards
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  
  <!-- Quote Summary Cards -->
  <div class="row">
    <div class="col-md-6 mb-3">
      <div class="card border-1 shadow-sm" style="border: 1px solid #F15A29; background-color: #fff;">
        <div class="card-body">
          <h5 class="card-title text-primary"><i class="fa-solid fa-house me-2 text-primary"></i> Home Cleaning Quotes</h5>
          <h3 class="card-text">{{ total_home_cleaning_quotes }}</h3>
          <div class="row mt-2">
            <div class="col-6">
              <small class="text-muted">Pending: {{ home_cleaning_quote_status_counts.pending }}</small><br>
              <small class="text-muted">Reviewed: {{ home_cleaning_quote_status_counts.reviewed }}</small>
            </div>
            <div class="col-6">
              <small class="text-muted">Quoted: {{ home_cleaning_quote_status_counts.quoted }}</small><br>
              <small class="text-muted">Accepted: {{ home_cleaning_quote_status_counts.accepted }}</small>
            </div>
          </div>
          <a href="{% url 'home_cleaning_quote_list' %}" class="btn btn-outline-orange btn-sm mt-2">Manage Home Cleaning Quotes</a>
        </div>
      </div>
    </div>

    <div class="col-md-6 mb-3">
      <div class="card border-1 shadow-sm" style="border: 1px solid #F15A29; background-color: #fff;">
        <div class="card-body">
          <h5 class="card-title text-primary"><i class="fa-solid fa-building me-2 text-primary"></i> Office Cleaning Quotes</h5>
          <h3 class="card-text">{{ total_office_cleaning_quotes }}</h3>
          <div class="row mt-2">
            <div class="col-6">
              <small class="text-muted">Pending: {{ office_cleaning_quote_status_counts.pending }}</small><br>
              <small class="text-muted">Reviewed: {{ office_cleaning_quote_status_counts.reviewed }}</small>
            </div>
            <div class="col-6">
              <small class="text-muted">Quoted: {{ office_cleaning_quote_status_counts.quoted }}</small><br>
              <small class="text-muted">Accepted: {{ office_cleaning_quote_status_counts.accepted }}</small>
            </div>
          </div>
          <a href="{% url 'office_cleaning_quote_list' %}" class="btn btn-outline-orange btn-sm mt-2">Manage Office Cleaning Quotes</a>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <div class="card border-1 shadow-sm" style="border: 1px solid #F15A29; background-color: #fff;">
        <div class="card-body">
          <h5 class="card-title text-primary"><i class="fa-solid fa-hammer me-2 text-primary"></i> Handyman Quotes</h5>
          <h3 class="card-text">{{ total_handyman_quotes }}</h3>
          <div class="row mt-2">
            <div class="col-6">
              <small class="text-muted">Pending: {{ handyman_quote_status_counts.pending }}</small><br>
              <small class="text-muted">Contacted: {{ handyman_quote_status_counts.contacted }}</small>
            </div>
            <div class="col-6">
              <small class="text-muted">Quoted: {{ handyman_quote_status_counts.quoted }}</small><br>
              <small class="text-muted">Completed: {{ handyman_quote_status_counts.completed }}</small>
            </div>
          </div>
          <a href="{% url 'handyman_quote_list' %}" class="btn btn-outline-orange btn-sm mt-2">Manage Handyman Quotes</a>
        </div>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <div class="card border-1 shadow-sm" style="border: 1px solid #F15A29; background-color: #fff;">
        <div class="card-body">
          <h5 class="card-title text-primary"><i class="fa-solid fa-broom me-2 text-primary"></i> Post Event Cleaning Quotes</h5>
          <h3 class="card-text">{{ total_post_event_cleaning_quotes }}</h3>
          <div class="row mt-2">
            <div class="col-6">
              <small class="text-muted">Pending: {{ post_event_cleaning_quote_status_counts.pending }}</small><br>
              <small class="text-muted">Contacted: {{ post_event_cleaning_quote_status_counts.contacted }}</small>
            </div>
            <div class="col-6">
              <small class="text-muted">Quoted: {{ post_event_cleaning_quote_status_counts.quoted }}</small><br>
              <small class="text-muted">Completed: {{ post_event_cleaning_quote_status_counts.completed }}</small>
            </div>
          </div>
          <a href="{% url 'post_event_cleaning_quote_list' %}" class="btn btn-outline-orange btn-sm mt-2">Manage Post Event Cleaning Quotes</a>
        </div>
      </div>
    </div>
  </div>



<script>
    function loadBookingDetails(bookingId) {
      fetch(`${bookingId}/json/`)
        .then(response => response.json())
        .then(data => {
          document.getElementById("detailService").textContent = data.service;
          document.getElementById("detailDate").textContent = data.date;
          document.getElementById("detailDuration").textContent = data.duration;
          document.getElementById("detailPrice").textContent = data.price;
          document.getElementById("detailStatus").textContent = data.status;
          document.getElementById("detailDescription").textContent = data.description;
    
          document.getElementById("bookingDetailCard").classList.remove("d-none");
        })
        .catch(error => {
          alert("Failed to load booking details");
          console.error(error);
        });
    }
</script>
{% endblock %}
