{% extends "base.html" %}

{% block content %}
<section class="contact-details">
  <div class="container">
    <h2>üéâ Office Cleaning Quote Submitted!</h2>
    <p>Thank you for your office cleaning request! Here's a breakdown of your service:</p>

    <div class="card mt-4">
      <div class="card-body">
        <h4>üí∞ Price Breakdown</h4>
        <ul class="list-group list-group-flush">
          
          {% if booking.crew_size_hours %}
            <li class="list-group-item">
              <strong>Service Package:</strong> {{ booking.crew_size_hours|title }}
            </li>
          {% endif %}

          {% if booking.num_cleaners and booking.hours_requested %}
            <li class="list-group-item">
              <strong>Labor Cost:</strong> {{ booking.num_cleaners }} cleaner(s) √ó {{ booking.hours_requested }} hour(s) √ó $75/hour
            </li>
          {% endif %}

          {% if booking.cleaning_frequency and booking.cleaning_frequency != "one_time" %}
            <li class="list-group-item">
              <strong>Frequency Discount:</strong>
              {% if booking.cleaning_frequency == "daily" %}
                20% off (Daily Service)
              {% elif booking.cleaning_frequency == "weekly" %}
                15% off (Weekly Service)
              {% elif booking.cleaning_frequency == "bi_weekly" %}
                10% off (Bi-Weekly Service)
              {% elif booking.cleaning_frequency == "monthly" %}
                5% off (Monthly Service)
              {% endif %}
            </li>
          {% endif %}

          {% if booking.extras.all %}
            <li class="list-group-item"><strong>Additional Services:</strong></li>
            {% for extra in booking.extras.all %}
              <li class="list-group-item ps-4">+ {{ extra.name }} ‚Äî ${{ extra.price }}</li>
            {% endfor %}
          {% endif %}

          <li class="list-group-item">
            <strong>Subtotal:</strong> ${{ booking.price|floatformat:2 }}
          </li>

          <li class="list-group-item">
            <strong>Sales Tax (8.875%):</strong> Calculated on final price
          </li>

          {% if booking.gift_card_discount %}
            <li class="list-group-item">
              <strong>Gift Card Discount:</strong> -${{ booking.gift_card_discount|floatformat:2 }}
            </li>
          {% endif %}
        </ul>

        <h5 class="mt-3">üíµ Total Price: <strong>${{ booking.price|floatformat:2 }}</strong></h5>
      </div>
    </div>

    <div class="card mt-4">
      <div class="card-body">
        <h4>üìÖ Scheduled Info</h4>
        <p><strong>Date:</strong> {{ booking.date }}</p>
        <p><strong>Time:</strong> {{ booking.hour }}</p>
        <p><strong>Duration:</strong> {{ booking.hours_requested }} hour(s)</p>
        <p><strong>Recurring:</strong> 
          {% if booking.recurrence_pattern != "one_time" %}
            {{ booking.get_recurrence_pattern_display }}
          {% else %}
            One-time
          {% endif %}
        </p>
      </div>
    </div>

    <div class="card mt-4">
      <div class="card-body">
        <h4>üè¢ Office Info</h4>
        <p><strong>Business Type:</strong> {{ booking.get_business_type_display }}</p>
        <p><strong>Service Package:</strong> {{ booking.crew_size_hours|title }}</p>
        <p><strong>How you heard about us:</strong> {{ booking.get_hear_about_us_display|default:"Not specified" }}</p>
        {% if booking.job_description %}
          <p><strong>Job Description:</strong> {{ booking.job_description }}</p>
        {% endif %}
      </div>
    </div>

    <div class="card mt-4">
      <div class="card-body">
        <h4>üìç Location Info</h4>
        <p><strong>Address:</strong> {{ booking.address }}{% if booking.apartment %}, Apt {{ booking.apartment }}{% endif %}</p>
        <p><strong>City:</strong> {{ booking.city }}</p>
        <p><strong>State:</strong> {{ booking.state }}</p>
        <p><strong>ZIP:</strong> {{ booking.zip_code }}</p>
      </div>
    </div>

    <div class="card mt-4">
      <div class="card-body">
        <h4>üë§ Contact Info</h4>
        <p><strong>Name:</strong> {{ booking.name }}</p>
        <p><strong>Email:</strong> {{ booking.email }}</p>
        {% if booking.phone %}
          <p><strong>Phone:</strong> {{ booking.phone }}</p>
        {% endif %}
      </div>
    </div>

    <div class="card mt-4">
      <div class="card-body">
        <h4>üìã Next Steps</h4>
        <ul>
          <li>We'll review your request and confirm the appointment within 24 hours</li>
          <li>You'll receive a confirmation email with all the details</li>
          <li>Our team will arrive at the scheduled time with all necessary equipment</li>
          <li>Payment will be collected after the service is completed</li>
        </ul>
        
        <div class="mt-3">
          <a href="{% url 'home' %}" class="btn btn-primary">Return to Home</a>
          <button onclick="window.print()" class="btn btn-secondary">Print Quote</button>
          <a href="{% url 'download_office_cleaning_pdf' booking.id %}" class="btn btn-success">Download PDF</a>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
